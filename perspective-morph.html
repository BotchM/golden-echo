<!doctype html>
<html>
  <head>
  </head>
  <body>
    <div class="scripts">
      <script src="./third-party/tween.js"></script>
      <script src="./third-party/two.js"></script>
      <script src="./src/camera.js"></script>
      <script src="./src/item.js"></script>
      <script>

        var two = new Two({
          type: Two.Types.canvas,
          fullscreen: true,
          autostart: true
        }).appendTo(document.body);

        var centroid = new Two.Vector(two.width / 2, two.height / 2);

        var camera = new Camera(two.width, two.height / 2);
        camera.translation.set(two.width / 2, two.height);

        var circles = makeCircles(camera);

        var debug = two.makeGroup(camera);
        var stage = two.makeGroup(circles);

        var t = 0;

        window.addEventListener('mousemove', function(e) {

          var amt = 2 * (e.clientX / two.width) - 1;
          camera.turn(amt / 2);

          circles[0].update(e.clientY / two.height);
          circles[0].offset.x = amt * 1000;

        });

        two
          .bind('resize', function() {

            centroid.set(two.width / 2, two.height / 2);
            Item.origin.set(two.width / 2, two.height / 2);

          })
          .trigger('resize');

        function makeCircles(camera) {

          var amt = 1;

          return _.map(_.range(amt), function(i) {

            var pct = i / (amt - 1);
            var r = 100;//Math.floor(Math.random() * 100);
            var s = Item.makeCircle(r);

            s.noStroke();
            s.fill = 'rgb('
              + Math.floor(Math.random() * 255) + ','
              + Math.floor(Math.random() * 255) + ','
              + Math.floor(Math.random() * 255) + ')';

            s.camera = camera;
            s.step = 0.0004;

            s.t = Math.random();

            s.offset.set(0, -50);
            //   2 * (Math.random() * two.width - two.width / 2),
            //   - 2 * Math.random() * two.height
            // );

          return s;

          });

        }

      </script>
    </div>
  </body>
</html>